<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Emoji by awesomes-cn</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Emoji</h1>
      <h2 class="project-tagline">A  emoji selector</h2>
      <a href="https://github.com/awesomes-cn/emoji" class="btn">View on GitHub</a>
      <a href="https://github.com/awesomes-cn/emoji/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/awesomes-cn/emoji/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="关于" class="anchor" href="#%E5%85%B3%E4%BA%8E" aria-hidden="true"><span class="octicon octicon-link"></span></a>关于</h1>

<p><img src="https://github.com/awesomes-cn/emoji/blob/master/images/demo.png?raw=true" alt="demo"></p>

<p>该插件是对 emoji 表情包进行的一个封装，能够很好地运用到我们的项目中去，具有如下特点：</p>

<ol>
<li><p>可在页面任何地方加入</p></li>
<li><p>可在单个页面加入多个实例而不会引起冲突</p></li>
<li><p>可选择获取到插入的表情标识或表情图片路径</p></li>
<li><p>可定制表情包的分类</p></li>
<li><p>提供多种参数自定义</p></li>
</ol>

<h1>
<a id="使用方法" class="anchor" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95" aria-hidden="true"><span class="octicon octicon-link"></span></a>使用方法</h1>

<p>1、引入 jquery 文件，这里咱们可以直接引用百度的cdn</p>

<div class="highlight highlight-text-xml"><pre>&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>http://libs.baidu.com/jquery/1.9.0/jquery.min.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre></div>

<p>2、引入underscore.js 文件，该文件是提供集合的处理</p>

<div class="highlight highlight-text-xml"><pre>&lt;<span class="pl-ent">script</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text/javascript<span class="pl-pds">"</span></span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>js/underscore-min.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre></div>

<p>3、选择性引入 editor.js 文件。该文件提供了一个文本框插入文本的方法，仅用于需要自己写编辑器插入表情的情况。</p>

<div class="highlight highlight-text-xml"><pre>&lt;<span class="pl-ent">script</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text/javascript<span class="pl-pds">"</span></span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>js/editor.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre></div>

<p>4、引入改插件的主js文件</p>

<div class="highlight highlight-text-xml"><pre>&lt;<span class="pl-ent">script</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text/javascript<span class="pl-pds">"</span></span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>js/emojis.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre></div>

<p>5、引入 css 文件，该文件定义了表情选择器的整个样式，当然也可以自己改写其中的某些样式。</p>

<div class="highlight highlight-text-xml"><pre>&lt;<span class="pl-ent">link</span> <span class="pl-e">rel</span>=<span class="pl-s"><span class="pl-pds">"</span>stylesheet<span class="pl-pds">"</span></span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text/css<span class="pl-pds">"</span></span> <span class="pl-e">href</span>=<span class="pl-s"><span class="pl-pds">"</span>css/emoji.css<span class="pl-pds">"</span></span>&gt;</pre></div>

<p>6、指定一个html标签容器供容纳表情</p>

<div class="highlight highlight-text-xml"><pre>&lt;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>emoji<span class="pl-pds">"</span></span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>emoji-container<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">img</span>  <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>emoji/unicode/1f604.png<span class="pl-pds">"</span></span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>emoji-tbtn<span class="pl-pds">"</span></span>&gt;
&lt;/<span class="pl-ent">div</span>&gt;</pre></div>

<p>该容器包含了一个div和内部的一个img标签。注意：div必须指定ID，默认给了一个 <code>emoji-container</code> 的样式，该样式主要定义了一个 position:relative。保证整个布局不会乱。里面的 img 标签实际上是选择表情的图标，注意里面有个 <code>emoji-tbtn</code> 的class。</p>

<p>7、初始化插件</p>

<div class="highlight highlight-text-xml"><pre>$('#emoji1').emoji({
  //- 参数列表
});</pre></div>

<p>参数详解</p>

<h3>
<a id="1data" class="anchor" href="#1data" aria-hidden="true"><span class="octicon octicon-link"></span></a>1、data</h3>

<p>表情数据，是一个json数组格式如下：</p>

<div class="highlight highlight-source-js"><pre>data<span class="pl-k">:</span> [
  {
    <span class="pl-s"><span class="pl-pds">"</span>typ<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>EmojiCategory-People<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>nm<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>人物<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>items<span class="pl-pds">"</span></span><span class="pl-k">:</span>[
      {<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>smile<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>src<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>unicode/1f604.png<span class="pl-pds">"</span></span>},
      {<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>smiley<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>src<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>unicode/1f603.png<span class="pl-pds">"</span></span>}
    ]
  },
  {
    <span class="pl-s"><span class="pl-pds">"</span>typ<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>EmojiCategory-Nature<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>nm<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>自然<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>items<span class="pl-pds">"</span></span><span class="pl-k">:</span>[
      {<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>smile<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>src<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>unicode/1f604.png<span class="pl-pds">"</span></span>},
      {<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>smiley<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>src<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>unicode/1f603.png<span class="pl-pds">"</span></span>}
    ]
  },
  .....
]</pre></div>

<p>默认已经有一个表情的数据了，所以一般情况下不需要管这个参数。</p>

<h3>
<a id="2path" class="anchor" href="#2path" aria-hidden="true"><span class="octicon octicon-link"></span></a>2、path</h3>

<p>表情图片的路径</p>

<h3>
<a id="3category" class="anchor" href="#3category" aria-hidden="true"><span class="octicon octicon-link"></span></a>3、category</h3>

<p>要显示的表情分类。默认的完整分类为：</p>

<div class="highlight highlight-source-js"><pre>category<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>EmojiCategory-People<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>EmojiCategory-Nature<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>EmojiCategory-Objects<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>EmojiCategory-Places<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>EmojiCategory-Symbols<span class="pl-pds">'</span></span>]</pre></div>

<p>可以根据自己的需要来增加或删除分类。</p>

<h3>
<a id="4showbar" class="anchor" href="#4showbar" aria-hidden="true"><span class="octicon octicon-link"></span></a>4、showbar</h3>

<p>是否显示左侧的分类菜单，如果是只显示一个分类，可以选择不显示</p>

<h3>
<a id="5trigger" class="anchor" href="#5trigger" aria-hidden="true"><span class="octicon octicon-link"></span></a>5、trigger</h3>

<p>分类切换的事件，默认为<code>click</code>，即鼠标点左侧的击分类菜单切换标签包，可设置成任何鼠标事件，比如<code>mouseover</code>即鼠标划过的时候切换。</p>

<h2>
<a id="事件" class="anchor" href="#%E4%BA%8B%E4%BB%B6" aria-hidden="true"><span class="octicon octicon-link"></span></a>事件</h2>

<h3>
<a id="1insertafter" class="anchor" href="#1insertafter" aria-hidden="true"><span class="octicon octicon-link"></span></a>1、insertAfter</h3>

<p>这是该插件唯一的事件，表示点击每个表情图片发生的事件。例如我们要将表情插入到文本框里面去，我们可以这样写。</p>

<div class="highlight highlight-source-js"><pre>$(<span class="pl-k">function</span>(){
  <span class="pl-k">var</span> em <span class="pl-k">=</span> $(<span class="pl-s"><span class="pl-pds">'</span>#emoji<span class="pl-pds">'</span></span>).<span class="pl-en">emoji</span>({
     <span class="pl-en">insertAfter</span><span class="pl-k">:</span> <span class="pl-k">function</span>(<span class="pl-smi">item</span>){
        $(<span class="pl-s"><span class="pl-pds">'</span>#area<span class="pl-pds">'</span></span>).<span class="pl-en">insertContent</span>(<span class="pl-s"><span class="pl-pds">'</span>[:<span class="pl-pds">'</span></span><span class="pl-k">+</span><span class="pl-smi">item</span>.<span class="pl-c1">name</span><span class="pl-k">+</span><span class="pl-s"><span class="pl-pds">'</span>:]<span class="pl-pds">'</span></span>)
      }
   });
})</pre></div>

<p>其中 item 参数是一个json对象，包括一个<code>name</code>和一个<code>src</code>。</p>

<p><strong>name</strong> 是该表情的字符串标识。</p>

<p><strong>src</strong> 表示表情图片的路径。</p>

<p><strong>数据处理</strong></p>

<p>该表情包是处理前端的展示，最终我们将数据存到了数据库里面，比如一条留言，那么我们该怎么样来展示这条留言呢？有两种方式来阻止文本：</p>

<p><strong>1、直接存表情图片路径</strong></p>

<p>如果我们将表情图片的路径存到了数据库里面，那么直接显示即可，但是这种方式会将图片路径写死，且不易改变数据，很不灵活，所以不推荐使用。</p>

<p><strong>2、存表情的标识</strong></p>

<p>即我们上面提到的 insertAfter 回掉里面的 item.name 。然后我们可以通过正则去将标识替换成图片。</p>

<p>标识的格式可以为</p>

<p><code>:smile:</code></p>

<p><code>[smile]</code></p>

<p><code>[:smile:]</code></p>

<p>也可以定义成我们自己的格式，只要保证插入表情标识的格式和解析的格式一致就OK了。</p>

<h3>
<a id="更新" class="anchor" href="#%E6%9B%B4%E6%96%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>更新</h3>

<p>原插件中的效果是，页面初始化后默认加载第一个分类的所有图片，如果你觉得这会带来额外的带宽，可以选择在点击插入表情图标后才初始化整个插件，而后才加载图片。那么你可以将 emojis.js 中的：</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">return</span> <span class="pl-smi">this</span>.<span class="pl-en">each</span>(<span class="pl-k">function</span>(){
      <span class="pl-en">render_nav</span>(<span class="pl-v">this</span>,options)
      <span class="pl-en">render_emoji</span>(<span class="pl-v">this</span>,options)
      <span class="pl-en">switchitem</span>(<span class="pl-v">this</span>,options)
      <span class="pl-en">togglew</span>(<span class="pl-v">this</span>,options)
    })</pre></div>

<p>修改成</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">return</span> <span class="pl-smi">this</span>.<span class="pl-en">each</span>(<span class="pl-k">function</span>(){
  <span class="pl-k">var</span> obj <span class="pl-k">=</span> <span class="pl-v">this</span>
  $(<span class="pl-v">this</span>).<span class="pl-c1">find</span>(<span class="pl-s"><span class="pl-pds">'</span>.emoji-tbtn<span class="pl-pds">'</span></span>).<span class="pl-en">one</span>(<span class="pl-s"><span class="pl-pds">'</span>click<span class="pl-pds">'</span></span>,<span class="pl-k">function</span>(){
        <span class="pl-en">render_nav</span>(obj,options)
        <span class="pl-en">render_emoji</span>(obj,options)
        <span class="pl-en">switchitem</span>(obj,options)
        <span class="pl-en">togglew</span>(obj,options)
   })
})</pre></div>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/awesomes-cn/emoji">Emoji</a> is maintained by <a href="https://github.com/awesomes-cn">awesomes-cn</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
